<div id="<%= rand(100) %>"
     class="chart"
     data-controller="chart"
     data-chart-name="<%= local_assigns[:name] %>"
     data-chart-type-value="<%= local_assigns[:type] %>"
     data-chart-start-x-value="<%= time_slice_start %>"
     data-chart-end-x-value="<%= time_slice_end %>">
  <div class="border-b border-gray-200 pb-5" hidden="">
    <h3 class="text-base font-semibold leading-4 text-gray-600"></h3>
  </div>
  <% if local_assigns[:series] %>
    <div data-chart-target="chart"></div>
    <% local_assigns[:series].slice(@time_range).downsample(buckets_for_chart, using: local_assigns[:aggregate_using]).to_a.each do |series| %>
      <script type="application/json" data-chart-target="data" data-series-name="<%= series.name.split('/').last %>">
        <%== series.data.map { |a| [a[0], a[1] == 'NaN' ? 0 : a[1]] }.to_json %>
      </script>
    <% end %>
  <% else %>
    <div class="text-center">
      <h3 class="mt-2 text-sm font-semibold text-gray-400">No data available in this timeframe</h3>
    </div>
  <% end %>


</div>